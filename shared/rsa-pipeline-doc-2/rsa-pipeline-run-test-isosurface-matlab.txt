******************************************************************
**
** Run Isosurface Matlab application
**
** Fri June 6 2013 Vladimir Popov <vladimir.popov@duke.edu>
**
******************************************************************


Command:

rsa-isosurface [Voxels] [OutputFile] 

*************************************************************************************
* Test Isosurface Matlab application
*************************************************************************************

The rsa-isosurface executable locates at the /usr/local/bin/matlab-programs/Isosurface folder

Unzip rsa-pipeline-isosurface-matlab-test-data.tar.gz to some folder [my_folder] on your computer.

You will get the following:

[my_folder]/rsa-pipeline-isosurface-matlab-test-data/ 
                                                    benchmark/ 
                                                              bm-OsRILp00001d12_rootwork.out.volume_area.txt 
                                                    OsRILp00001d12_rootwork.out


Voxels = [my_folder]/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out
OutputFile = [my_folder]/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out.volume_area.txt


Type in the terminal window:

/usr/local/bin/matlab-programs/Isosurface/rsa-isosurface [my_folder]/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out [my_folder]/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out.volume_area.txt


On my computer, I chose for test:

[my_folder] = ~/tmp
 
So,

/usr/local/bin/matlab-programs/Isosurface/rsa-isosurface ~/tmp/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out  ~/tmp/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out.volume_area.txt



You will see in the terminal window something like:

===== START OUTPUT=================================================================================================

[vp23@mk42ws2 tmp]$ /usr/local/bin/matlab-programs/Isosurface/rsa-isosurface ~/tmp/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out  ~/tmp/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out.volume_area.txt

****** Calculating Root Surface Area ... **********

****** Matlab starting ... **********

MATLABPATH=:/usr/local/bin/matlab-programs/Isosurface

Arguments passed:
1=~/tmp/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out
2=~/tmp/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out.volume_area.txt

Warning: No window system found.  Java option 'MWT' ignored

                                                                                              < M A T L A B (R) >
                                                                                    Copyright 1984-2010 The MathWorks, Inc.
                                                                                 Version 7.11.0.584 (R2010b) 64-bit (glnxa64)
                                                                                                August 16, 2010

 
  To get started, type one of these: helpwin, helpdesk, or demo.
  For product information, visit www.mathworks.com.
 
inFile=~/tmp/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out
outFile=~/tmp/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out.volume_area.txt

processing  voxels = ~/tmp/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out
scale=1

isosurface_roots STARTS
 ... ... ... ... ... ...
 ... ... ... ... ... ...
 ... ... ... ... ... ...
isosurface_roots FINISHED

display isosurface_roots result

rootstats.volume=6418
rootstats.area=5055.8767
rootstats.fit_area_error=0.0083333
rootstats.fit_area_error_note=This is a relative error per degree of freedom, less than 0.01 (e.g., 1%) could be a good indicator of suitability of the extrapolation

writing calculations result to file: ~/tmp/rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out.volume_area.txt

rsa_isosurface DONE

****** Matlab ended ... **********

****** Calculating Root Surface Area DONE **********

===== END OUTPUT =================================================================================================


The output file  OsRILp00001d12_rootwork.out.volume_area.txt will locate at ~/tmp/rsa-pipeline-isosurface-matlab-test-data folder


NOTE:

You can compare numbers in the bm-OsRILp00001d12_rootwork.out.volume_area.txt and OsRILp00001d12_rootwork.out.volume_area.txt files.


##### tar ########

In the pipeline, there are symlinks in the /silhouette/thresholding folder 

For packaging a test data sample, we need targets of these links (otherwise, the links would be obviously broken, when deploying)

Here is how to get targets instead of links:

cd silhouette/thresholding
for i in *; do link=$(readlink $i) && rm $i && mv $link $i; done

cd ~/tmp
tar -pczf rsa-pipeline-isosurface-matlab-test-data.tar.gz rsa-pipeline-isosurface-matlab-test-data/OsRILp00001d12_rootwork.out


